<!DOCTYPE html><html><head><title>spring配置datasource三种方式</title><meta charset='utf-8'><link href='https://dn-maxiang.qbox.me/res-min/themes/marxico.css' rel='stylesheet'><style>
.note-content  {font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif;}

</style></head><body><div id='preview-contents' class='note-content'>
                        <div id="wmd-preview" class="preview-content"></div>
                    <div id="wmd-preview-section-3048" class="wmd-preview-section preview-content">

</div><div id="wmd-preview-section-3049" class="wmd-preview-section preview-content">

<h1 id="spring配置datasource三种方式">spring配置datasource三种方式</h1>

<div><div class="toc"><div class="toc">
<ul>
<li><a href="#spring配置datasource三种方式">spring配置datasource三种方式</a><ul>
<li><a href="#示例说明">示例说明</a><ul>
<li><a href="#使用orgspringframeworkjdbcdatasourcedrivermanagerdatasource">使用org.springframework.jdbc.datasource.DriverManagerDataSource</a></li>
<li><a href="#使用orgapachecommonsdbcpbasicdatasource">使用org.apache.commons.dbcp.BasicDataSource</a></li>
<li><a href="#使用orgspringframeworkjndijndiobjectfactorybean">使用org.springframework.jndi.JndiObjectFactoryBean</a></li>
</ul>
</li>
<li><a href="#详细说明">详细说明</a><ul>
<li><a href="#dbcp数据源">DBCP数据源</a></li>
<li><a href="#c3p0数据源">C3P0数据源</a></li>
<li><a href="#获取jndi数据源">获取JNDI数据源</a></li>
<li><a href="#小结">小结</a><ul>
<li><a href="#dbcp与c3po配置的区别">DBCP与C3PO配置的区别：</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

</div><div id="wmd-preview-section-3050" class="wmd-preview-section preview-content">

<h2 id="示例说明">示例说明</h2>

</div><div id="wmd-preview-section-3051" class="wmd-preview-section preview-content">

<h3 id="使用orgspringframeworkjdbcdatasourcedrivermanagerdatasource">使用org.springframework.jdbc.datasource.DriverManagerDataSource</h3>

<p>说明：DriverManagerDataSource建立连接是只要有连接就新建一个connection,根本没有连接池的作用。 </p>

</div><div id="wmd-preview-section-3052" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-XML hljs"><span class="hljs-comment line-number">1.</span><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span> <br><span class="hljs-comment line-number">2.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"driverClassName"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>${jdbc.driverClassName}<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span> <br><span class="hljs-comment line-number">3.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"url"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>${jdbc.url}<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span> <br><span class="hljs-comment line-number">4.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"username"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>${jdbc.username}<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span> <br><span class="hljs-comment line-number">5.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>${jdbc.password}<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span> <br><span class="hljs-comment line-number">6.</span><span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span> <br></code></pre>

</div><div id="wmd-preview-section-3053" class="wmd-preview-section preview-content">

<h3 id="使用orgapachecommonsdbcpbasicdatasource">使用org.apache.commons.dbcp.BasicDataSource</h3>

<p>说明:这是一种推荐说明的数据源配置方式，它真正使用了连接池技术 </p>

</div><div id="wmd-preview-section-3054" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-xml hljs"><span class="hljs-comment line-number">1.</span>    <span class="hljs-comment">&lt;!-- 配置dbcp数据源 --&gt;</span><br><span class="hljs-comment line-number">2.</span>      <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource2"</span> <span class="hljs-attribute">destroy-method</span>=<span class="hljs-value">"close"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.apache.commons.dbcp.BasicDataSource"</span>&gt;</span><br><span class="hljs-comment line-number">3.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"driverClassName"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.driverClassName}"</span>/&gt;</span><br><span class="hljs-comment line-number">4.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"url"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.url}"</span>/&gt;</span><br><span class="hljs-comment line-number">5.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"username"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.username}"</span>/&gt;</span><br><span class="hljs-comment line-number">6.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.password}"</span>/&gt;</span><br><span class="hljs-comment line-number">7.</span>        <span class="hljs-comment">&lt;!-- 池启动时创建的连接数量 --&gt;</span><br><span class="hljs-comment line-number">8.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"initialSize"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"5"</span>/&gt;</span><br><span class="hljs-comment line-number">9.</span>        <span class="hljs-comment">&lt;!-- 同一时间可以从池分配的最多连接数量。设置为0时表示无限制。 --&gt;</span><br><span class="hljs-comment line-number">10.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"maxActive"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"30"</span>/&gt;</span><br><span class="hljs-comment line-number">11.</span>        <span class="hljs-comment">&lt;!-- 池里不会被释放的最多空闲连接数量。设置为0时表示无限制。 --&gt;</span><br><span class="hljs-comment line-number">12.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"maxIdle"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"20"</span>/&gt;</span><br><span class="hljs-comment line-number">13.</span>        <span class="hljs-comment">&lt;!-- 在不新建连接的条件下，池中保持空闲的最少连接数。 --&gt;</span><br><span class="hljs-comment line-number">14.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"minIdle"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"3"</span>/&gt;</span><br><span class="hljs-comment line-number">15.</span>        <span class="hljs-comment">&lt;!-- 设置自动回收超时连接 --&gt;</span>  <br><span class="hljs-comment line-number">16.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"removeAbandoned"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"true"</span> /&gt;</span><br><span class="hljs-comment line-number">17.</span>        <span class="hljs-comment">&lt;!-- 自动回收超时时间(以秒数为单位) --&gt;</span>  <br><span class="hljs-comment line-number">18.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"removeAbandonedTimeout"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"200"</span>/&gt;</span><br><span class="hljs-comment line-number">19.</span>        <span class="hljs-comment">&lt;!-- 设置在自动回收超时连接的时候打印连接的超时错误  --&gt;</span> <br><span class="hljs-comment line-number">20.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"logAbandoned"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"true"</span>/&gt;</span><br><span class="hljs-comment line-number">21.</span>        <span class="hljs-comment">&lt;!-- 等待超时以毫秒为单位，在抛出异常之前，池等待连接被回收的最长时间（当没有可用连接时）。设置为-1表示无限等待。  --&gt;</span>  <br><span class="hljs-comment line-number">22.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"maxWait"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"100"</span>/&gt;</span>  <br><span class="hljs-comment line-number">23.</span>      <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><br><span class="hljs-comment line-number">24.</span><br></code></pre>

<p>###使用c3p0 </p>

</div><div id="wmd-preview-section-3055" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs xml"><span class="hljs-comment line-number">1.</span>     <span class="hljs-comment">&lt;!-- 配置c3p0数据源 --&gt;</span><br><span class="hljs-comment line-number">2.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"com.mchange.v2.c3p0.ComboPooledDataSource"</span> <span class="hljs-attribute">destroy-method</span>=<span class="hljs-value">"close"</span>&gt;</span><br><span class="hljs-comment line-number">3.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"jdbcUrl"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.url}"</span> /&gt;</span><br><span class="hljs-comment line-number">4.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"driverClass"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.driverClassName}"</span> /&gt;</span><br><span class="hljs-comment line-number">5.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"user"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.username}"</span> /&gt;</span><br><span class="hljs-comment line-number">6.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.password}"</span> /&gt;</span><br><span class="hljs-comment line-number">7.</span>        <span class="hljs-comment">&lt;!--连接池中保留的最大连接数。Default: 15 --&gt;</span><br><span class="hljs-comment line-number">8.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"maxPoolSize"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"100"</span> /&gt;</span><br><span class="hljs-comment line-number">9.</span>        <span class="hljs-comment">&lt;!--连接池中保留的最小连接数。--&gt;</span><br><span class="hljs-comment line-number">10.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"minPoolSize"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"1"</span> /&gt;</span><br><span class="hljs-comment line-number">11.</span>        <span class="hljs-comment">&lt;!--初始化时获取的连接数，取值应在minPoolSize与maxPoolSize之间。Default: 3 --&gt;</span><br><span class="hljs-comment line-number">12.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"initialPoolSize"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"10"</span> /&gt;</span><br><span class="hljs-comment line-number">13.</span>        <span class="hljs-comment">&lt;!--最大空闲时间,60秒内未使用则连接被丢弃。若为0则永不丢弃。Default: 0 --&gt;</span><br><span class="hljs-comment line-number">14.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"maxIdleTime"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"30"</span> /&gt;</span><br><span class="hljs-comment line-number">15.</span>        <span class="hljs-comment">&lt;!--当连接池中的连接耗尽的时候c3p0一次同时获取的连接数。Default: 3 --&gt;</span><br><span class="hljs-comment line-number">16.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"acquireIncrement"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"5"</span> /&gt;</span><br><span class="hljs-comment line-number">17.</span>        <span class="hljs-comment">&lt;!--JDBC的标准参数，用以控制数据源内加载的PreparedStatements数量。但由于预缓存的statements<br><span class="hljs-comment line-number">18.</span>          属于单个connection而不是整个连接池。所以设置这个参数需要考虑到多方面的因素。<br><span class="hljs-comment line-number">19.</span>          如果maxStatements与maxStatementsPerConnection均为0，则缓存被关闭。Default: 0--&gt;</span><br><span class="hljs-comment line-number">20.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"maxStatements"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"0"</span> /&gt;</span><br><span class="hljs-comment line-number">21.</span>        <span class="hljs-comment">&lt;!--每60秒检查所有连接池中的空闲连接。Default: 0 --&gt;</span><br><span class="hljs-comment line-number">22.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"idleConnectionTestPeriod"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"60"</span> /&gt;</span><br><span class="hljs-comment line-number">23.</span>        <span class="hljs-comment">&lt;!--定义在从数据库获取新连接失败后重复尝试的次数。Default: 30 --&gt;</span><br><span class="hljs-comment line-number">24.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"acquireRetryAttempts"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"30"</span> /&gt;</span><br><span class="hljs-comment line-number">25.</span>        <span class="hljs-comment">&lt;!--获取连接失败将会引起所有等待连接池来获取连接的线程抛出异常。但是数据源仍有效<br><span class="hljs-comment line-number">26.</span>          保留，并在下次调用getConnection()的时候继续尝试获取连接。如果设为true，那么在尝试<br><span class="hljs-comment line-number">27.</span>          获取连接失败后该数据源将申明已断开并永久关闭。Default: false--&gt;</span><br><span class="hljs-comment line-number">28.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"breakAfterAcquireFailure"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"true"</span> /&gt;</span><br><span class="hljs-comment line-number">29.</span>        <span class="hljs-comment">&lt;!--因性能消耗大请只在需要的时候使用它。如果设为true那么在每个connection提交的<br><span class="hljs-comment line-number">30.</span>          时候都将校验其有效性。建议使用idleConnectionTestPeriod或automaticTestTable<br><span class="hljs-comment line-number">31.</span>          等方法来提升连接测试的性能。Default: false --&gt;</span><br><span class="hljs-comment line-number">32.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"testConnectionOnCheckout"</span>  <span class="hljs-attribute">value</span>=<span class="hljs-value">"false"</span> /&gt;</span>        <br><span class="hljs-comment line-number">33.</span>    <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><br></code></pre>

</div><div id="wmd-preview-section-3056" class="wmd-preview-section preview-content">

<h3 id="使用orgspringframeworkjndijndiobjectfactorybean">使用org.springframework.jndi.JndiObjectFactoryBean</h3>

<p>说明:JndiObjectFactoryBean 能够通过JNDI获取DataSource </p>

</div><div id="wmd-preview-section-3057" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-xml hljs"><span class="hljs-comment line-number">1.</span><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.jndi.JndiObjectFactoryBean"</span>&gt;</span> <br><span class="hljs-comment line-number">2.</span>   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"jndiName"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>Java:comp/env/jdbc/roseindiaDB_local<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span> <br><span class="hljs-comment line-number">3.</span><span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span> <br></code></pre>

<p>或者是用jee</p>

</div><div id="wmd-preview-section-3058" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-xml hljs"><span class="hljs-comment line-number">1.</span><span class="hljs-tag">&lt;<span class="hljs-title">beans</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">http:</span>//<span class="hljs-attribute">www.springframework.org</span>/<span class="hljs-attribute">schema</span>/<span class="hljs-attribute">beans</span>      <br><span class="hljs-comment line-number">2.</span><span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">http:</span>//<span class="hljs-attribute">www.w3.org</span>/<span class="hljs-attribute">2001</span>/<span class="hljs-attribute">XMLSchema-instance</span>      <br><span class="hljs-comment line-number">3.</span><span class="hljs-attribute">xmlns:jee</span>=<span class="hljs-value">http:</span>//<span class="hljs-attribute">www.springframework.org</span>/<span class="hljs-attribute">schema</span>/<span class="hljs-attribute">jee</span>      <br><span class="hljs-comment line-number">4.</span><span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans       <br><span class="hljs-comment line-number">5.</span>http://www.springframework.org/schema/beans/spring-beans-2.0.xsd       <br><span class="hljs-comment line-number">6.</span>http://www.springframework.org/schema/jee      <br><span class="hljs-comment line-number">7.</span>http://www.springframework.org/schema/jee/spring-jee-2.0.xsd"</span>&gt;</span>        <br><span class="hljs-comment line-number">8.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">jee:jndi-lookup</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">jndi-name</span>=<span class="hljs-value">" java:comp/env/jdbc/orclight"</span>/&gt;</span>        <br><span class="hljs-comment line-number">9.</span><span class="hljs-tag">&lt;/<span class="hljs-title">beans</span>&gt;</span>  <br></code></pre>

<p>总结：3种方式中的第一种没有使用连接池，故少在项目中用到，第三种方式需要在web server中配置数据源，不方便于部署，本人推荐使用每二种方式进行数据源的配置。 </p>

</div><div id="wmd-preview-section-3059" class="wmd-preview-section preview-content">

<h2 id="详细说明">详细说明</h2>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs mel"><span class="hljs-comment line-number">1.</span><span class="hljs-keyword">spring</span>在第三方依赖包中包含了两个数据源的实现类包，其一是Apache的DBCP，其二是 C3P0。可以在Spring配置文件中利用这两者中任何一个配置数据源。 <br></code></pre>

</div><div id="wmd-preview-section-3060" class="wmd-preview-section preview-content">

<h3 id="dbcp数据源">DBCP数据源</h3>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs xml"><span class="hljs-comment line-number">1.</span>DBCP类包位于 <span class="hljs-tag">&lt;<span class="hljs-title">spring_home</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">spring_home</span>&gt;</span>/lib/jakarta-commons/commons-dbcp.jar，DBCP是一个依赖 Jakarta commons-pool对象池机制的数据库连接池，所以在类路径下还必须包括<span class="hljs-tag">&lt;<span class="hljs-title">spring_home</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">spring_home</span>&gt;</span>/lib/jakarta- commons/commons-pool.jar。下面是使用DBCP配置MySQL数据源的配置片断： <br></code></pre>

</div><div id="wmd-preview-section-3061" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-XML hljs"><span class="hljs-comment line-number">1.</span><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.apache.commons.dbcp.BasicDataSource"</span>       <br><span class="hljs-comment line-number">2.</span>    <span class="hljs-attribute">destroy-method</span>=<span class="hljs-value">"close"</span>&gt;</span>       <br><span class="hljs-comment line-number">3.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"driverClassName"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"com.mysql.jdbc.Driver"</span> /&gt;</span>      <br><span class="hljs-comment line-number">4.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"url"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"jdbc:mysql://localhost:3309/sampledb"</span> /&gt;</span>      <br><span class="hljs-comment line-number">5.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"username"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"root"</span> /&gt;</span>      <br><span class="hljs-comment line-number">6.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"1234"</span> /&gt;</span>      <br><span class="hljs-comment line-number">7.</span><span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>  <br></code></pre>

<p>BasicDataSource提供了close()方法关闭数据源，所以必须设定destroy-method=”close”属性， 以便Spring容器关闭时，数据源能够正常关闭。除以上必须的数据源属性外，还有一些常用的属性： </p>

<blockquote>
  <p>defaultAutoCommit：设置从数据源中返回的连接是否采用自动提交机制，默认值为 true；  <br>
      defaultReadOnly：设置数据源是否仅能执行只读操作， 默认值为 false；  <br>
      maxActive：最大连接数据库连接数，设置为0时，表示没有限制；  <br>
      maxIdle：最大等待连接中的数量，设置为0时，表示没有限制；  <br>
      maxWait：最大等待秒数，单位为毫秒， 超过时间会报出错误信息；  <br>
      validationQuery：用于验证连接是否成功的查询SQL语句，SQL语句必须至少要返回一行数据， 如你可以简单地设置为：“select count(*) from user”；  <br>
      removeAbandoned：是否自我中断，默认是 false ；  <br>
      removeAbandonedTimeout：几秒后数据连接会自动断开，在removeAbandoned为true，提供该值；  <br>
  logAbandoned：是否记录中断事件， 默认为 false； </p>
</blockquote>

</div><div id="wmd-preview-section-3062" class="wmd-preview-section preview-content">

<h3 id="c3p0数据源">C3P0数据源</h3>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs crystal"><span class="hljs-comment line-number">1.</span><span class="hljs-constant">C3P0</span>是一个开放源代码的<span class="hljs-constant">JDBC</span>数据源实现项目，它在<span class="hljs-class"><span class="hljs-keyword">lib</span>目录中与<span class="hljs-title">hibernate</span>一起发布，实现了<span class="hljs-title">JDBC3</span>和<span class="hljs-title">JDBC2</span>扩展规范说明的 <span class="hljs-title">Connection</span> 和<span class="hljs-title">Statement</span> 池。<span class="hljs-title">C3P0</span>类包位于&lt;<span class="hljs-title">spring_home</span>&gt;&lt;/<span class="hljs-title">spring_home</span>&gt;/<span class="hljs-title">lib</span>/<span class="hljs-title">c3p0</span>/<span class="hljs-title">c3p0</span>-0.9.0.4.<span class="hljs-title">jar</span>。下面是使用<span class="hljs-title">C3P0</span>配置一个 <span class="hljs-title">Oracle</span>数据源： </span><br></code></pre>

</div><div id="wmd-preview-section-3063" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-xml hljs"><span class="hljs-comment line-number">1.</span><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"com.mchange.v2.c3p0.ComboPooledDataSource"</span> <span class="hljs-attribute">destroy-method</span>=<span class="hljs-value">"close"</span>&gt;</span>      <br><span class="hljs-comment line-number">2.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"driverClass"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">" oracle.jdbc.driver.OracleDriver "</span>/&gt;</span>      <br><span class="hljs-comment line-number">3.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"jdbcUrl"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">" jdbc:oracle:thin:@localhost:1521:ora9i "</span>/&gt;</span>      <br><span class="hljs-comment line-number">4.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"user"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"admin"</span>/&gt;</span>      <br><span class="hljs-comment line-number">5.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"1234"</span>/&gt;</span>      <br><span class="hljs-comment line-number">6.</span><span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>  <br></code></pre>

<p>ComboPooledDataSource和BasicDataSource一样提供了一个用于关闭数据源的close()方法，这样我们就可以保证Spring容器关闭时数据源能够成功释放。 </p>

<blockquote>
  <p>C3P0拥有比DBCP更丰富的配置属性，通过这些属性，可以对数据源进行各种有效的控制：  <br>
      acquireIncrement：当连接池中的连接用完时，C3P0一次性创建新连接的数目；  <br>
      acquireRetryAttempts：定义在从数据库获取新连接失败后重复尝试获取的次数，默认为30；  <br>
      acquireRetryDelay：两次连接中间隔时间，单位毫秒，默认为1000；  <br>
      autoCommitOnClose：连接关闭时默认将所有未提交的操作回滚。默认为false；  <br>
      automaticTestTable： C3P0将建一张名为Test的空表，并使用其自带的查询语句进行测试。如果定义了这个参数，那么属性preferredTestQuery将被忽略。你 不能在这张Test表上进行任何操作，它将中为C3P0测试所用，默认为null；  <br>
      breakAfterAcquireFailure：获取连接失败将会引起所有等待获取连接的线程抛出异常。但是数据源仍有效保留，并在下次调   用getConnection()的时候继续尝试获取连接。如果设为true，那么在尝试获取连接失败后该数据源将申明已断开并永久关闭。默认为 false；  <br>
      checkoutTimeout：当连接池用完时客户端调用getConnection()后等待获取新连接的时间，超时后将抛出SQLException，如设为0则无限期等待。单位毫秒，默认为0；  <br>
      connectionTesterClassName： 通过实现ConnectionTester或QueryConnectionTester的类来测试连接，类名需设置为全限定名。默认为 com.mchange.v2.C3P0.impl.DefaultConnectionTester；  <br>
      idleConnectionTestPeriod：隔多少秒检查所有连接池中的空闲连接，默认为0表示不检查；  <br>
      initialPoolSize：初始化时创建的连接数，应在minPoolSize与maxPoolSize之间取值。默认为3；  <br>
      maxIdleTime：最大空闲时间，超过空闲时间的连接将被丢弃。为0或负数则永不丢弃。默认为0；  <br>
      maxPoolSize：连接池中保留的最大连接数。默认为15；  <br>
      maxStatements：JDBC的标准参数，用以控制数据源内加载的PreparedStatement数量。但由于预缓存的Statement属 于单个Connection而不是整个连接池。所以设置这个参数需要考虑到多方面的因素，如果maxStatements与 maxStatementsPerConnection均为0，则缓存被关闭。默认为0；  <br>
      maxStatementsPerConnection：连接池内单个连接所拥有的最大缓存Statement数。默认为0；  <br>
      numHelperThreads：C3P0是异步操作的，缓慢的JDBC操作通过帮助进程完成。扩展这些操作可以有效的提升性能，通过多线程实现多个操作同时被执行。默认为3；  <br>
      preferredTestQuery：定义所有连接测试都执行的测试语句。在使用连接测试的情况下这个参数能显著提高测试速度。测试的表必须在初始数据源的时候就存在。默认为null；  <br>
      propertyCycle： 用户修改系统配置参数执行前最多等待的秒数。默认为300；  <br>
      testConnectionOnCheckout：因性能消耗大请只在需要的时候使用它。如果设为true那么在每个connection提交的时候都 将校验其有效性。建议使用idleConnectionTestPeriod或automaticTestTable  <br>
  等方法来提升连接测试的性能。默认为false；  <br>
  testConnectionOnCheckin：如果设为true那么在取得连接的同时将校验连接的有效性。默认为false。 </p>
</blockquote>

<p>读配置文件的方式引用属性： </p>

</div><div id="wmd-preview-section-3064" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-xml hljs"><span class="hljs-comment line-number">1.</span><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"propertyConfigurer"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span>&gt;</span><br><span class="hljs-comment line-number">2.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"location"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"/WEB-INF/jdbc.properties"</span>/&gt;</span>      <br><span class="hljs-comment line-number">3.</span><span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>      <br><span class="hljs-comment line-number">4.</span><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.apache.commons.dbcp.BasicDataSource"</span> <span class="hljs-attribute">destroy-method</span>=<span class="hljs-value">"close"</span>&gt;</span>      <br><span class="hljs-comment line-number">5.</span>   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"driverClassName"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.driverClassName}"</span> /&gt;</span>      <br><span class="hljs-comment line-number">6.</span>   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"url"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.url}"</span> /&gt;</span>      <br><span class="hljs-comment line-number">7.</span>   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"username"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.username}"</span> /&gt;</span>      <br><span class="hljs-comment line-number">8.</span>   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.password}"</span> /&gt;</span>      <br><span class="hljs-comment line-number">9.</span><span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><br></code></pre>

<p>在jdbc.properties属性文件中定义属性值： </p>

</div><div id="wmd-preview-section-3065" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs stylus"><span class="hljs-comment line-number">1.</span>    jdbc.driverClassName= com<span class="hljs-class">.mysql</span><span class="hljs-class">.jdbc</span><span class="hljs-class">.Driver</span> <br><span class="hljs-comment line-number">2.</span>    jdbc.url= jdbc:mysql:<span class="hljs-comment">//localhost:3309/sampledb </span><br><span class="hljs-comment line-number">3.</span>    jdbc.username=root  <br><span class="hljs-comment line-number">4.</span>    jdbc.password=<span class="hljs-number">1234</span> <br></code></pre>

<p>提示 经常有开发者在<strong>${xxx}</strong>的前后不小心键入一些空格，这些空格字符将和变量合并后作为属性的值。如： </p>

</div><div id="wmd-preview-section-3066" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs applescript"><span class="hljs-comment line-number">1.</span>&lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"username"</span> value=<span class="hljs-string">" ${jdbc.username} "</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br></code></pre>

<p>的属性配置项，在前后都有空格，被解析后，username的值为“ 1234 ”，这将造成最终的错误，因此需要特别小心。 </p>

</div><div id="wmd-preview-section-3067" class="wmd-preview-section preview-content">

<h3 id="获取jndi数据源">获取JNDI数据源</h3>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs"><span class="hljs-comment line-number">1.</span>如果应用配置在高性能的应用服务器（如WebLogic或Websphere等）上，我们可能更希望使用应用服务器本身提供的数据源。应用服务器的数据源 使用JNDI开放调用者使用，Spring为此专门提供引用JNDI资源的JndiObjectFactoryBean类。下面是一个简单的配置： <br></code></pre>

</div><div id="wmd-preview-section-3068" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-xml hljs"><span class="hljs-comment line-number">1.</span><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.jndi.JndiObjectFactoryBean"</span>&gt;</span>      <br><span class="hljs-comment line-number">2.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"jndiName"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"java:comp/env/jdbc/bbt"</span>/&gt;</span>      <br><span class="hljs-comment line-number">3.</span><span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>  <br></code></pre>

<p>通过jndiName指定引用的JNDI数据源名称。  <br>
    Spring 2.0为获取J2EE资源提供了一个jee命名空间，通过jee命名空间，可以有效地简化J2EE资源的引用。下面是使用jee命名空间引用JNDI数据源的配置： </p>

</div><div id="wmd-preview-section-3069" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-xml hljs"><span class="hljs-comment line-number">1.</span><span class="hljs-tag">&lt;<span class="hljs-title">beans</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">http:</span>//<span class="hljs-attribute">www.springframework.org</span>/<span class="hljs-attribute">schema</span>/<span class="hljs-attribute">beans</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">http:</span>//<span class="hljs-attribute">www.w3.org</span>/<span class="hljs-attribute">2001</span>/<span class="hljs-attribute">XMLSchema-instance</span> <span class="hljs-attribute">xmlns:jee</span>=<span class="hljs-value">http:</span>//<span class="hljs-attribute">www.springframework.org</span>/<span class="hljs-attribute">schema</span>/<span class="hljs-attribute">jee</span> <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans-2.0.xsd     http://www.springframework.org/schema/jee    http://www.springframework.org/schema/jee/spring-jee-2.0.xsd"</span>&gt;</span><br><span class="hljs-comment line-number">2.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">jee:jndi-lookup</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">jndi-name</span>=<span class="hljs-value">" java:comp/env/jdbc/bbt"</span> /&gt;</span><br><span class="hljs-comment line-number">3.</span><span class="hljs-tag">&lt;/<span class="hljs-title">beans</span>&gt;</span><br></code></pre>

<p>Spring的数据源实现类  <br>
    Spring本身也提供了一个简单的数据源实现类DriverManagerDataSource ，它位于org.springframework.jdbc.datasource包中。这个类实现了javax.sql.DataSource接口，但 它并没有提供池化连接的机制，每次调用getConnection()获取新连接时，只是简单地创建一个新的连接。因此，这个数据源类比较适合在单元测试 或简单的独立应用中使用，因为它不需要额外的依赖类。  <br>
     下面，我们来看一下DriverManagerDataSource的简单使用：当然，我们也可以通过配置的方式直接使用DriverManagerDataSource。 </p>

</div><div id="wmd-preview-section-3070" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-java hljs"><span class="hljs-comment line-number">1.</span>DriverManagerDataSource ds = <span class="hljs-keyword">new</span> DriverManagerDataSource ();      <br><span class="hljs-comment line-number">2.</span>ds.setDriverClassName(<span class="hljs-string">"com.mysql.jdbc.Driver"</span>);      <br><span class="hljs-comment line-number">3.</span>ds.setUrl(<span class="hljs-string">"jdbc:mysql://localhost:3309/sampledb"</span>);      <br><span class="hljs-comment line-number">4.</span>ds.setUsername(<span class="hljs-string">"root"</span>);      <br><span class="hljs-comment line-number">5.</span>ds.setPassword(<span class="hljs-string">"1234"</span>);      <br><span class="hljs-comment line-number">6.</span>Connection actualCon = ds.getConnection();  <br></code></pre>

</div><div id="wmd-preview-section-3071" class="wmd-preview-section preview-content">

<h3 id="小结">小结</h3>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs"><span class="hljs-comment line-number">1.</span>不管采用何种持久化技术，都需要定义数据源。Spring附带了两个数据源的实现类包，你可以自行选择进行定义。在实际部署时，我们可能会直接采用应用服 务器本身提供的数据源，这时，则可以通过JndiObjectFactoryBean或jee命名空间引用JNDI中的数据源。 <br></code></pre>

</div><div id="wmd-preview-section-3072" class="wmd-preview-section preview-content">

<h4 id="dbcp与c3po配置的区别">DBCP与C3PO配置的区别：</h4>

<p>C3PO   :     DBCP</p>

</div><div id="wmd-preview-section-3073" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-xml hljs"><span class="hljs-comment line-number">1.</span><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"com.mchange.v2.c3p0.ComboPooledDataSource"</span> <span class="hljs-attribute">destroy-method</span>=<span class="hljs-value">"close"</span>&gt;</span>  <br><span class="hljs-comment line-number">2.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"driverClass"</span>&gt;</span>  <br><span class="hljs-comment line-number">3.</span>       <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>oracle.jdbc.driver.OracleDriver<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>  <br><span class="hljs-comment line-number">4.</span>    <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  <br><span class="hljs-comment line-number">5.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"jdbcUrl"</span>&gt;</span>             <br><span class="hljs-comment line-number">6.</span>       <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>jdbc:oracle:thin:@10.10.10.6:1521:DataBaseName<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>  <br><span class="hljs-comment line-number">7.</span>    <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  <br><span class="hljs-comment line-number">8.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"user"</span>&gt;</span>  <br><span class="hljs-comment line-number">9.</span>       <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>testAdmin<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>  <br><span class="hljs-comment line-number">10.</span>    <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  <br><span class="hljs-comment line-number">11.</span>    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span>&gt;</span>  <br><span class="hljs-comment line-number">12.</span>        <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>123456<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>  <br><span class="hljs-comment line-number">13.</span>    <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  <br><span class="hljs-comment line-number">14.</span><span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>  <br></code></pre>

<p>xml 代码 </p>

</div><div id="wmd-preview-section-3074" class="wmd-preview-section preview-content">

<pre class="prettyprint with-line-number hljs-dark"><code class="language-xml hljs"><span class="hljs-comment line-number">1.</span><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.apache.commons.dbcp.BasicDataSource"</span> <span class="hljs-attribute">destroy-method</span>=<span class="hljs-value">"close"</span>&gt;</span>  <br><span class="hljs-comment line-number">2.</span>   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"driverClassName"</span>&gt;</span>  <br><span class="hljs-comment line-number">3.</span>       <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>oracle.jdbc.driver.OracleDriver<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>  <br><span class="hljs-comment line-number">4.</span>   <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  <br><span class="hljs-comment line-number">5.</span>   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"url"</span>&gt;</span>             <br><span class="hljs-comment line-number">6.</span>      <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>jdbc:oracle:thin:@10.10.10.6:1521:DataBaseName<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>  <br><span class="hljs-comment line-number">7.</span>     <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  <br><span class="hljs-comment line-number">8.</span>   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"username"</span>&gt;</span>  <br><span class="hljs-comment line-number">9.</span>       <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>testAdmin<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>  <br><span class="hljs-comment line-number">10.</span>   <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  <br><span class="hljs-comment line-number">11.</span>   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span>&gt;</span>  <br><span class="hljs-comment line-number">12.</span>       <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>123456<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>  <br><span class="hljs-comment line-number">13.</span>    <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  <br><span class="hljs-comment line-number">14.</span><span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><br></code></pre></div><div id="wmd-preview-section-footnotes" class="preview-content"></div></div></body></html>